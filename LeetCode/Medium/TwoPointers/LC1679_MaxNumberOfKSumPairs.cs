namespace LeetCode.Medium.TwoPointers;

/// <summary>
/// 1679. Max Number of K-Sum Pairs
/// –£—Å–ª–æ–≤–∏–µ: –¥–∞–Ω –º–∞—Å—Å–∏–≤ nums –∏ —Ü–µ–ª–æ–µ k. –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä (i, j),
/// —Ç–∞–∫–∏—Ö —á—Ç–æ nums[i] + nums[j] == k. –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–π –ø–∞—Ä–µ.
///
/// –ü–æ–¥—Ö–æ–¥ (–¥–≤–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è):
/// 1. –°–æ—Ä—Ç–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤.
/// 2. –°—Ç–∞–≤–∏–º —É–∫–∞–∑–∞—Ç–µ–ª–∏: left –≤ –Ω–∞—á–∞–ª–æ, right –≤ –∫–æ–Ω–µ—Ü.
/// 3. –°—á–∏—Ç–∞–µ–º —Å—É–º–º—É = nums[left] + nums[right].
///    - –ï—Å–ª–∏ —Å—É–º–º–∞ == k ‚Üí –Ω–∞—à–ª–∏ –ø–∞—Ä—É ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –∏ —Å–¥–≤–∏–≥–∞–µ–º –æ–±–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è.
///    - –ï—Å–ª–∏ —Å—É–º–º–∞ < k ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º left (–Ω—É–∂–Ω–æ —á–∏—Å–ª–æ –ø–æ–±–æ–ª—å—à–µ).
///    - –ï—Å–ª–∏ —Å—É–º–º–∞ > k ‚Üí —É–º–µ–Ω—å—à–∞–µ–º right (–Ω—É–∂–Ω–æ —á–∏—Å–ª–æ –ø–æ–º–µ–Ω—å—à–µ).
///
/// –°–ª–æ–∂–Ω–æ—Å—Ç—å:
/// - –í—Ä–µ–º—è: O(n log n) ‚Äî –∏–∑-–∑–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
/// - –ü–∞–º—è—Ç—å: O(1) ‚Äî –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
///
/// –ü—Ä–∏–º–µ—Ä 1:
/// Input:  nums = [1,2,3,4], k = 5
/// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: [1,2,3,4]
/// –•–æ–¥ —Ä–∞–±–æ—Ç—ã:
/// 1 + 4 = 5 ‚úÖ ‚Üí –ø–∞—Ä–∞ (1,4)
/// 2 + 3 = 5 ‚úÖ ‚Üí –ø–∞—Ä–∞ (2,3)
/// –ü–∞—Ä—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å.
/// Output: 2
/// </summary>
public class Lc1679MaxNumberOfKSumPairs
{
    public int MaxOperations(int[] nums, int k)
    {
        Array.Sort(nums); // –°–æ—Ä—Ç–∏—Ä—É–µ–º, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–≤–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è
        var left = 0;            // –ª–µ–≤—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å
        var right = nums.Length - 1; // –ø—Ä–∞–≤—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å
        var ops = 0;             // —Å—á—ë—Ç—á–∏–∫ –ø–∞—Ä

        // –ü–æ–∫–∞ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–ª–∏—Å—å
        while (left < right)
        {
            var sum = nums[left] + nums[right];

            if (sum == k)
            {
                // üéØ –Ω–∞—à–ª–∏ –ø–∞—Ä—É
                ops++;
                left++;
                right--;
            }
            else if (sum < k)
            {
                // –°—É–º–º–∞ –º–µ–Ω—å—à–µ –Ω—É–∂–Ω–æ–π ‚Üí —Å–¥–≤–∏–≥–∞–µ–º –ª–µ–≤—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å –≤–ø—Ä–∞–≤–æ
                left++;
            }
            else
            {
                // –°—É–º–º–∞ –±–æ–ª—å—à–µ –Ω—É–∂–Ω–æ–π ‚Üí —Å–¥–≤–∏–≥–∞–µ–º –ø—Ä–∞–≤—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å –≤–ª–µ–≤–æ
                right--;
            }
        }

        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø–∞—Ä
        return ops;
    }
}
